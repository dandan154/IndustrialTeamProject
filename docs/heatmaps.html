<html>
    <head>
        <title>wrld.time.js Demo</title>        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" />
        <link rel="stylesheet" href="css/wrld.time.css" />
        <link rel="stylesheet" href="css/atom-one-dark.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
        <link rel="stylesheet" href="css/docs.css">
    </head>
    <body style="margin: 0">
        <div class="page-container">
        <div class="content">

<h1>wrld.time.js</h1>
<p class="centered"><a href="#">Examples</a> | <a href="#">Fork on GitHub</a></p>

<h2>Heatmaps</h2>

<h3>Basic usage</h3>

<p>A heatmap can be added on both indoor and outdoor maps. To create a heatmap, first initialize the Wrld map:</p>

<pre><code class="html">&lt;div id="map"&gt;&lt;/div&gt;
&lt;script src="https://cdn-webgl.wrld3d.com/wrldjs/dist/latest/wrld.js"&gt;&lt;/script&gt;
&lt;script src="wrld.time.js"&gt;&lt;/script&gt;
&lt;script&gt;
    var map = L.Wrld.map("map", "[YOUR WRLD API KEY]", { 
        center: [ 56.462, -2.9707 ], 
        indoorsEnabled: true 
    });
&lt;/script&gt;</code></pre>

<p>Once the Wrld map has been created, initialise wrld.time.js with the heatmap option set to true:</p>

<pre><code class="javascript">wrldTime(map, data2, {
    heatmap: true
});</code></pre>


<h3>Intensity</h3>

<p>Heatmaps may be used in a variety of situations.</p>


</div>
        <div class="map" id="map"></div>
        </div>
        <script src="https://cdn-webgl.wrld3d.com/wrldjs/dist/latest/wrld.js"></script>
        <script src="js/heatmap.js"></script>
        <script src="js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="js/wrld.time.js"></script>
        <script>
            var map = L.Wrld.map("map", "21343d1ce0a398a7244c29e3c619ea37", { 
                center: [ 56.462, -2.9707 ],
                indoorsEnabled: true
            });

            var features = [];

            function addRandomPins(features, centerCoords, radius, number, indoorId) {
                for (var i = 0; i < number; i++) {
                    var month = Math.floor(Math.random()*8)+1;
                    var day = Math.floor(Math.random()*8)+1;
                    features.push({
                        "geometry": {
                            "type": "Point", 
                            "coordinates": [
                                centerCoords[0]+Math.random()*radius-(radius/2), 
                                centerCoords[1]+Math.random()*radius-(radius/2),
                            ]
                        },
                        "type": "Feature", 
                        "id": i, 
                        "properties": {
                            "date":  "2018-0" + month + "-0" + day, 
                            "town": "Dundee", 
                            "intensity": 31,
                            "indoorMapId": indoorId,
                            "indoorMapFloorId": (indoorId) ? 2 : undefined
                        }
                    });
                }
            }

            var dundeeCenter = [ -2.9707, 56.462 ];
            var dundeeRadius = 0.05;
            var indoorCenter = [ -2.978318964344612, 56.46007119297972 ];
            var indoorRadius = .0004;
            var indoorMapId = 'westport_house';
            addRandomPins(features, dundeeCenter, dundeeRadius, 100);
            addRandomPins(features, indoorCenter, indoorRadius, 100, indoorMapId);
            
            var data2 = {
                "type": "FeatureCollection",
                "features": features
            }

            /**
             * Creates the wrldTime object
             */
            var wrldTimeObj = wrldTime(map, data2, {
                heatmap: true,
                heatmapColor: {},
                horizontalPosition: 'right',
                verticalPosition: 'bottom'
            });
        </script>
    </body>
</html>